En te basant sur cet énoncé, réécris le code suivant tout en conservant exactement sa fonctionnalité.

```python
n, k = map(int, input().split())
boats = [set(list(map(int, input().split()))[1:]) for _ in range(k)]
r = int(input())
out = set()
for _ in range(r):
  p, q = map(int, input().split())
  for boat in boats:
    if p in boat and q in boat:
      out.add(p)
      out.add(q)
      break
print(len(out))
```