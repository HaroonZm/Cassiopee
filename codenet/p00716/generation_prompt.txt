En te basant sur cet énoncé, réécris le code suivant tout en conservant exactement sa fonctionnalité.

```python
def tanri(a, y, r, c):
    o = 0
    for i in range(y):
        o += int((a-i*c)*r)
    o += a-y*c
    return o

def fukuri(a, y, r, c):
    o = a
    for i in range(y):
        o = int(o*(1+r))-c
    return o

m = int(input())
for _ in range(m):
    a = int(input())
    y = int(input())
    n = int(input())
    b = []
    for i in range(n):
        t,r,c = input().split()
        r = float(r)
        c = int(c)
        if t == '0':
            b.append(tanri(a, y, r, c))
        else:
            b.append(fukuri(a, y, r, c))
    print(max(b))
```