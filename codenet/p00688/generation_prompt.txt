Voici un énoncé de problème :

Factorization of Quadratic Formula
As the first step in algebra, students learn quadratic formulas and
their factorization. Often, the factorization is a severe burden
for them. A large number of students cannot master the factorization;
such students cannot be aware of the elegance of advanced algebra.
It might be the case that the factorization increases the number of people
who hate mathematics.
Your job here is to write a program which helps students of
an algebra course. Given a quadratic formula, your program should report
how the formula can be factorized into two linear formulas.
All coefficients of quadratic formulas and those of resultant
linear formulas are integers in this problem.
The coefficients
a
,
b
and
c
of a quadratic formula
ax
2
+
bx
+
c
are given.
The values of
a
,
b
and
c
are integers,
and their absolute values do not exceed 10000.
From these values, your program is requested to find four integers
p
,
q
,
r
and
s
, such that
ax
2
+
bx
+
c
=
(
px
+
q
)(
rx
+
s
).
Since we are considering integer coefficients only, it is not
always possible to factorize a quadratic formula into linear formulas.
If the factorization of the given formula is impossible,
your program should report that fact.
Input
The input is a sequence of lines, each representing
a quadratic formula.
An input line is given in the following format.
a
b
c
Each of
a
,
b
and
c
is an integer.
They satisfy the following inequalities.
0 <
a
<= 10000
-10000 <=
b
<= 10000
-10000 <=
c
<= 10000
The greatest common divisor of
a
,
b
and
c
is 1.
That is, there is no integer
k
, greater than 1,
such that all of
a
,
b
and
c
are divisible by
k
.
The end of input is indicated by a line consisting of three 0's.
Output
For each input line, your program should output the four integers
p
,
q
,
r
and
s
in a line, if they exist.
These integers should be output in this order, separated by
one or more white spaces.
If the factorization is impossible, your program should output a line
which contains the string "Impossible" only.
The following relations should hold between the values
of the four coefficients.
p
> 0
r
> 0
(
p
>
r
) or (
p
=
r
and
q
>=
s
)
These relations, together with the fact that the greatest common
divisor of
a
,
b
and
c
is 1,
assure the uniqueness of the solution.
If you find a way to factorize the formula, it is not necessary
to seek another way to factorize it.
Sample Input
2 5 2
1 1 1
10 -7 0
1 0 -3
0 0 0
Output for the Sample Input
2 1 1 2
Impossible
10 -7 1 0
Impossible


En te basant sur cet énoncé, réécris le code suivant tout en conservant exactement sa fonctionnalité.

```python
# AOJ 1106: Factorization of Quadratic Formula
# Python3 2018.7.15 bal4u

def gcd(a, b):
	while b != 0:
		r = a % b
		a, b = b, r
	return a

while True:
	a, b, c = map(int, input().split())
	if a == 0: break
	d = b**2-4*a*c
	if d < 0: print("Impossible"); continue
	d = d**0.5
	if not d.is_integer(): print("Impossible"); continue
	d = int(d)
	d1, d2, a2 = -b+d, -b-d, a<<1
	g1, g2 = gcd(d1, a2), gcd(d2, a2)
	p, q = a2//g1, -d1//g1
	if p < 0: p, q = -p, -q
	r, s = a2//g2, -d2//g2
	if r < 0: r, s = -r, -s
	if (p < r) or (p == r and q < s): p, q, r, s = r, s, p, q
	print(p, q, r, s)
```