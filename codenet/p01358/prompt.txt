Voici un énoncé de problème :

Problem J: Usaneko Matrix
うさぎとねこが勝負をしている. ルールは以下の通りである.
まず2 匹はそれぞれ
n
行
n
列の正方形状に
n
2
個の整数を紙に書き, トランプを1 枚ずつ引く. 次に, 1 から 1 000 000 までの数が1 つずつ書かれた1 000 000 枚のカードを2 匹でシャッフルし, これを1 枚ずつ交互に引いていく. 2 匹はカードが引かれるたび, カードと同じ数が自分の紙に書かれていたらそれに印をつける. 「印がついた
n
個の数の組であって, 一直線上に並んでいるもの」の個数が, はじめに引いたトランプの数以上になることを勝利条件とする.
与えられた
m
枚目のカードまでで, うさぎとねこのどちらが勝つか答えよ. ただし勝敗は, あるカードが引かれて印をつけ終わった段階で2 匹のうち片方のみが勝利条件をみたしたときに決まるものとし, それ以外の場合は引き分けとする. いずれかが勝利条件をみたした後でもカードが引かれることはあるが, これは勝敗に影響しない.
Input
1 行目：“
n u v m
” (正方形のサイズ, うさぎのトランプの数, ねこのトランプの数, 引かれるカードの枚数) 2-(
N
+ 1) 行目：うさぎが紙に書く
n
2
個の数(
N
+ 2)-(2
N
+ 1) 行目：ねこが紙に書く
n
2
個の数(2
N
+ 2)-(2
N
+
M
+ 1) 行目：引かれるm 枚のカード
1 ≤
n
≤ 500
1 ≤
u
,
v
≤ 13
1 ≤
m
≤ 100 000
1 ≤ (書かれる数) ≤ 1 000 000
うさぎが紙に書く
n
2
個の数, ねこが紙に書く
n
2
個の数, 引かれる
m
枚のカードに書かれた数はそれぞれの中で異なる.
Output
うさぎが勝つ場合には”USAGI”を, ねこが勝つ場合には”NEKO”を, 引き分けならば”DRAW”, それぞれ
一行に出力せよ.
Sample Input 1
3 2 2 10
1 2 3
4 5 6
7 8 9
1 2 3
6 5 4
7 8 9
11
4
7
5
10
9
2
1
3
8
Sample Output 1
USAGI
Sample Input 2
3 2 1 10
1 2 3
4 5 6
7 8 9
1 2 3
6 5 4
7 8 9
11
4
7
5
10
9
2
1
3
8
Sample Output 2
DRAW
